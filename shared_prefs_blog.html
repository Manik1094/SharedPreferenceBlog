<html lang=en>

<head>
<style>
img {
  display: block;
  margin-left: auto;
  margin-right: auto;
  width: 280px
}
</style>
</head>



<p><strong>Table of Contents:</strong></p>

<ol>            
<li><a href='#demo'>Demo</a></li>  
<li><a href='#introduction'>Introduction</a></li>
<li><a href='#what-is-sharedPreferences'>What is Shared Preferences?</a></li>
<li><a href='#when-you-should-use-it'>When you should use it?</a></li>
<li><a href='#when-you-should-not-use-it'>When you should not use it?</a></li>

<li>
An Example:
<br>
<ol>

<li><a href='#LoginApp'>Login App</a></li>
<li><a href='#designingLayout'>Designing Layout</a></li>
<li><a href='#initialization'>Initialization</a></li>
<li><a href='#storingData'>Storing data to Preferences</a></li>
<li><a href='#retreiveData'>Retreiving data from Preferences</a></li>
<li><a href='#logoutUser'>Logout User</a></li>
<li><a href='#checksIfUserLoggedInorOut'>Check if User Logged in or not</a></li>

</ol>
</ol>
</li>
</ul>
<br>
<br><br>

<h3 id='demo'>Demo</h3>
<br>

 <img src="H:\Blogs stuff\shared_prefs_blog_gif.gif"> 

<br><br><br>


<h3 id='introduction'>Introduction</h3>
<br>
In this blog I'm going to show you how to work with Shared Preferences in Android. 
<br><br><br>


<h3 id='what-is-sharedPreferences'>What is Shared Preferences?</h3>
<br>
Android system provides many ways to save data for your application.One of them is Shared Preferences.Shared Preferences allows you to save data in key-value pairs and it stores all primitive types(booleans,int,strings etc).

<br><br><br>


<h3 id='when-you-should-use-it'>When you should use it?</h3>
<br>
<ul>
<li><b>When the small amount of data is to be stored:</b><br><br>
Shared Preferences can be used to store small amount of data like single text , some numerical value or saving some user settings.
</li>
<br><br>
<li><b>When the length of time saved is more for data:</b><br><br>
The data stored in Shared preferences remains in file till the app is uninstalled.It persists across the app restarts and even phone restarts.
</li>
</ul>
<br><br><br>


<h3 id='when-you-should-not-use-it'>When you should not use it?</h3>
<br>
<ul>
<li><b>When the amount of data is more:</b><br><br>
When you want to store large amount of data , Shared preferences is not the option then you should go for local database or cloud database.
</li>
</ul>
<br><br><br>


<h3 id='LoginApp'>Login App</h3>
<br>
We will build the simple Login App which will store name and email-id of user in Shared preferences to login and on other screen , details of user will be displayed by retreiving data from preferences.
<br>
Let's begin the coding!!!
<br><br><br>

<h3 id='designingLayout'>Designing Layout</h3>
<br>
Open activity_main.xml file and add the following code. It contains two editText for name and email and one button for Login , also create another empty activity named HomeActivity and open activity_home.xml and add the following code.It contains two textViews for name and email and one button for Logout.
<br><br>
<script src="https://gist.github.com/Manik1094/2991895033b02c8b841d99cdb2d3474b.js"></script>
<br>
<script src="https://gist.github.com/Manik1094/b512533da8e5979f23dc093cabe2f0fb.js"></script>
<br><br><br>

<h3 id='initialization'>Initialization</h3>
Open MainActivity.java file and add the following code . We need an Editor to edit and save to preferences.To get access to preferences we need to first initialize the SharedPreferences.This can be done in three ways:
<br>
<ul>
<li><b>getPreferences() : </b> when you want to get activity specific preferences , this can be used from acitvity.</li>
<li><b>getSharedPreferences() : </b>when you want to get application specific preferences , this can be used from activity or other application context.</li>
<li><b>getDefaultSharedPreferences() : </b> when you want to get preferences that work with Android's preference framework.</li>
</ul>
<br>
<b>Note: </b> getSharedPreferences() takes two arguments - prefs file name and operating mode.Some of the operating modes are discussed below:
<ul>
<li><b>MODE_PRIVATE : </b> when you want your file to not access outside your application.</li>
<li><b>MODE_APPEND : </b>when you want to append the preferences with the already existing preferences.</li>
<li><b>MODE_WORLD_READABLE : </b> when you want all applications to have read access to your file , Deprecated in API level 17.</li>
<li><b>MODE_WORLD_WRITEABLE : </b>when you want all applications to have write access to your file , Deprecated in API level 17.</li>
</ul>
 
<br><br>
<script src="https://gist.github.com/Manik1094/c70e2dcf100ff9f36414d0d0c4a7272d.js"></script>
<br><br><br>

<h3 id='storingData'>Storing data to Preferences</h3>
<br>
Open MainActivity.java file and add the following code , on click of login button we are storing email,name and status to preferences.
<p>Storing data requires two things - one is key(always a string) and other is value</p>
<br>
<b>What is the difference between commit() and apply() ?</b>
<br>
<ul>
<li><b>commit() : </b> Writes the data synchronously , blocking the thread its called from. This also informs about the success of operation.</li>
<li><b>apply() : </b> Writes the data asynchronously , this does not informs about the success of operation.</li>
</ul>
<br>
<b>How to view SharedPreferences file ?</b>
<br><br>
First connect your device then in Android studio go to Device File Explorer => data => data => "package_name" => shared_prefs => your xml file
<br><br>
<script src="https://gist.github.com/Manik1094/a3575b0843a8e73ba1a927d2ae415c49.js"></script>
<br><br>
<b>After storing data , shared preferences file will look like this :</b>
<br><br>
<script src="https://gist.github.com/Manik1094/9f5f8ddccebcb521cd63f53cdd54cc2c.js"></script>
<br><br><br>

<h3 id='retreiveData'>Retreiving data from Preferences</h3>
<br>
Open HomeActivity.java file and add the following code , We are retreiving data from preferences file and displaying it in textViews.
<p>Retreiving data requires two things - one is key(always a string) and other is default value which we provided is null.</p>
<br><br>
<script src="https://gist.github.com/Manik1094/c5345614f6930df1903dd3bd365115de.js"></script>

<br><br><br>

<h3 id='logoutUser'>Logout User</h3>
<br>
Open HomeActivity.java file and add the following code , on click of button we have cleared the preference file and sent the intent to MainActivity.
<br><br>
<script src="https://gist.github.com/Manik1094/4c953ba6f5e0a83c3a31b93f7dae01c3.js"></script>
<br><br>
<b>After user is logged out, shared preferences file will look like this :</b>
<br><br>
<script src="https://gist.github.com/Manik1094/15b6f872e53857b4ad2cbd516dfb8240.js"></script>
<br><br><br>

<h3 id='checksIfUserLoggedInorOut'>Check if User Logged in or not</h3>
<br>
Create new empty Activity named SplashActivity ,  and inside SplashActivity.java file add the following code.In onStart() if preference file contains "name" key(user is logged in) then control is transferred to HomeActivity else transferred to MainActivity(user is logged out) . 
<br><br>
<b>Note: </b> Make SplashActivity a launcher activity from AndroidManifest.xml file 
<br><br>
<script src="https://gist.github.com/Manik1094/138c596a831ffc7167dcb1bf7f7e9a6d.js"></script>
<br>

<script src="https://gist.github.com/Manik1094/4e15fa93d9b4340c7f2f54acca6a798c.js"></script>
<br><br><br>


That's All! Happy Coding!
<br><br><br>

The complete code is available <a href="https://github.com/Manik1094/SharedPreferenceExample" target="_blank" rel="nofollow">here</a>.
<br><br><br>





</html>